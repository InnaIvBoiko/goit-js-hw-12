{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport ErrorIcon from '../img/error.svg';\n\nconst keywords = document.querySelector('.keywords');\nconst loading = document.querySelector('.loading');\n\nconst API_KEY = '42438077-634a4b32cfcaa96ebaa8c4719';\nconst API_URL = 'https://pixabay.com/api/';\nconst perPage = 15;\nlet page = 1;\n\n\n\nasync function searchImg() {\n    page = 1;\n\n    const QUERY = encodeURIComponent(keywords.value);\n    const URL = `${API_URL}?key=${API_KEY}&q=${QUERY}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    \n    const response = await axios.get(URL);\n    loading.classList.add('visually-hidden'); \n\n    return response.data;\n};\n\nasync function seeMoreFunction() {\n    loading.classList.remove('visually-hidden');\n   \n        \n    if (page <= (500 / perPage)) {\n        page++;\n        \n        const query = localStorage.getItem('KEY_FOR_SEARCH');\n\n        const URL = `${API_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    \n        const more = await axios.get(URL);\n        loading.classList.add('visually-hidden'); \n\n        return more.data.hits;\n    };\n};\n        \n\nconst errorMessage = () =>\n    iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        messageSize: '16',\n        backgroundColor: '#EF4040',\n        iconUrl: ErrorIcon,\n        position: 'topRight',\n        close: true,\n        layout: 2,\n        timeout: 2000\n    });\n\n\nconst errorSeeMore = () =>\n    iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#fff',\n        messageSize: '16',\n        backgroundColor: '#EF4040',\n        iconUrl: ErrorIcon,\n        position: 'topRight',\n        close: true,\n        layout: 2,\n        timeout: 2000\n    });\n\nexport { keywords, loading, perPage, searchImg, seeMoreFunction, errorMessage, errorSeeMore };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n   \nfunction markUp(images) {\n    const resalt = images.map((image) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.previewURL}\" \n                    alt=\"${image.tags}\"\n                />\n            </a>\n            <div class=\"gallery-info\">\n                <div class=\"column\">\n                    <h2>likes</h2>\n                    <p>${image.likes}</p>\n                </div>\n                <div class=\"column\">\n                    <h2>views</h2>\n                    <p>${image.views}</p>\n                </div>\n                 <div class=\"column\">\n                    <h2>comments</h2>\n                    <p>${image.comments}</p>\n                </div>\n                <div class=\"column\">\n                    <h2>downloads</h2>\n                    <p>${image.downloads}</p>\n                </div>\n            </div>\n        </li>`)\n        .join('');\n        \n    gallery.insertAdjacentHTML('beforeend', resalt);\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captionPosition: 'bottom'\n    }).refresh();\n};      \n           \nexport { gallery, markUp };","import { keywords, loading, perPage, searchImg, seeMoreFunction, errorMessage, errorSeeMore } from './js/pixabay-api';\nimport { gallery, markUp } from \"./js/render-functions\";\n\nconst formSearch = document.querySelector('.form-search');\nconst showMoreBtn = document.querySelector('.btn-more');\n\nlet page = 1;\nlet keyForSearch;\n\nformSearch.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    gallery.innerHTML = '';\n    \n    if (keywords.value) {\n        loading.classList.remove('visually-hidden');\n        keyForSearch = encodeURIComponent(keywords.value);\n        localStorage.setItem(\"KEY_FOR_SEARCH\", keyForSearch);\n\n        searchImg()\n            .then(data => {\n                if (data.totalHits > 0) {\n                    if (data.totalHits > (page * perPage)) {\n                        showMoreBtn.classList.remove('visually-hidden');\n                    }; \n                    return data.hits;\n                };\n            })\n            .then((images) => {\n                markUp(images);\n            })\n            .catch(() => {\n                localStorage.removeItem('KEY_FOR_SEARCH');\n                errorMessage();\n            })\n            .finally(() => {\n                formSearch.reset();\n            });\n    };\n});\n\nshowMoreBtn.addEventListener('click', (event) => {\n    event.preventDefault();\n\n    seeMoreFunction()\n        .then((images) => {\n            markUp(images);\n        })\n        .catch(() => {\n            showMoreBtn.classList.add('visually-hidden');\n            loading.classList.add('visually-hidden');\n            errorSeeMore();\n            page = 1;\n            localStorage.removeItem('KEY_FOR_SEARCH');\n        });\n});"],"names":["ErrorIcon","keywords","loading","API_KEY","API_URL","perPage","page","searchImg","QUERY","URL","response","axios","seeMoreFunction","query","more","errorMessage","iziToast","errorSeeMore","gallery","markUp","images","resalt","image","SimpleLightbox","formSearch","showMoreBtn","keyForSearch","event","data"],"mappings":"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"}