{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport ErrorIcon from '../img/error.svg';\n\nconst keywords = document.querySelector('.keywords');\nconst loading = document.querySelector('.loading');\n\nconst API_KEY = '42438077-634a4b32cfcaa96ebaa8c4719';\nconst API_URL = 'https://pixabay.com/api/';\nconst perPage = 15;\nlet page = 1;\n\nasync function searchImg() {\n    page = 1;\n\n    const QUERY = encodeURIComponent(keywords.value);\n    const URL = `${API_URL}?key=${API_KEY}&q=${QUERY}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    localStorage.setItem(\"KEY_FOR_SEARCH\", QUERY);\n\n    const response = await axios.get(URL);\n    \n    const totalHits = response.data.totalHits;\n    localStorage.setItem('TOTAL_HITS', totalHits);\n\n    loading.classList.add('visually-hidden'); \n\n    return response.data;\n};\n\nasync function seeMoreFunction() {\n    loading.classList.remove('visually-hidden');\n    const totalHits = localStorage.getItem('TOTAL_HITS');\n        \n    if (page < (totalHits / perPage)) {\n        page++;\n        \n        const query = localStorage.getItem('KEY_FOR_SEARCH');\n        const URL = `${API_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    \n        const more = await axios.get(URL);\n        loading.classList.add('visually-hidden'); \n\n        return more.data;\n    };\n};\n        \nconst errorMessage = () =>\n    iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        messageSize: '16',\n        backgroundColor: '#EF4040',\n        iconUrl: ErrorIcon,\n        position: 'topRight',\n        close: true,\n        layout: 2,\n        timeout: 3000\n    });\n\nconst errorSeeMore = () =>\n    iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#fff',\n        messageSize: '16',\n        backgroundColor: '#FFA000',\n        iconUrl: ErrorIcon,\n        position: 'topRight',\n        close: true,\n        layout: 2,\n        timeout: 3000\n    });\n\nexport { keywords, loading, page, perPage, searchImg, seeMoreFunction, errorMessage, errorSeeMore };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n   \nfunction markUp(images) {\n    const resalt = images.map((image) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.previewURL}\" \n                    alt=\"${image.tags}\"\n                />\n            </a>\n            <div class=\"gallery-info\">\n                <div class=\"column\">\n                    <h2>likes</h2>\n                    <p>${image.likes}</p>\n                </div>\n                <div class=\"column\">\n                    <h2>views</h2>\n                    <p>${image.views}</p>\n                </div>\n                 <div class=\"column\">\n                    <h2>comments</h2>\n                    <p>${image.comments}</p>\n                </div>\n                <div class=\"column\">\n                    <h2>downloads</h2>\n                    <p>${image.downloads}</p>\n                </div>\n            </div>\n        </li>`)\n        .join('');\n        \n    gallery.insertAdjacentHTML('beforeend', resalt);\n    // const lightbox = new SimpleLightbox('.gallery a', {\n    //     captionsData: 'alt',\n    //     captionDelay: 250,\n    //     captionPosition: 'bottom'\n    // });\n    // lightbox.refresh();\n}; \n\nfunction lightbox() {\n    new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captionPosition: 'bottom'\n    }).refresh();\n};\n\nfunction scroll() {\n    const galleryCard = document.querySelector('.gallery-item');\n    const galleryCardData = galleryCard.getBoundingClientRect();\n    const galleryCardHeight = 2 * galleryCardData.height;\n\n    setTimeout(() => {\n        window.scrollBy({\n        top: galleryCardHeight,\n        left: 0,\n        behavior: 'smooth',\n        });\n    }, 1000);\n};\n           \nexport { gallery, lightbox, markUp, scroll };","import { keywords, loading, page, perPage, searchImg, seeMoreFunction, errorMessage, errorSeeMore } from './js/pixabay-api';\nimport { gallery, lightbox, markUp, scroll } from \"./js/render-functions\";\n\nconst formSearch = document.querySelector('.form-search');\nconst showMoreBtn = document.querySelector('.btn-more');\n\nformSearch.addEventListener('submit', (event) => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    showMoreBtn.classList.add('visually-hidden');\n    \n    if (keywords.value) {\n        loading.classList.remove('visually-hidden');\n\n        searchImg()\n            .then(data => {\n                if (data.totalHits > 0) {\n                    if (data.totalHits > (page * perPage)) {\n                        showMoreBtn.classList.remove('visually-hidden');\n                    }; \n                    return data.hits;\n                };\n            })\n            .then((images) => {\n                markUp(images);\n                lightbox();\n                scroll();\n            })\n            .catch(() => {\n                errorMessage();\n            })\n            .finally(() => {\n                formSearch.reset();\n            });\n    };\n});\n\nshowMoreBtn.addEventListener('click', (event) => {\n    event.preventDefault();\n\n    seeMoreFunction()\n        .then((data) => {\n            if (data.totalHits < ((page + 1) * perPage)) {\n                showMoreBtn.classList.add('visually-hidden'); \n                loading.classList.add('visually-hidden'); \n                errorSeeMore();\n            }\n            return data.hits;\n        })\n        .then((images) => {\n            markUp(images);\n            lightbox();\n            scroll();\n        })\n        .catch(() => {\n            showMoreBtn.classList.add('visually-hidden');\n            loading.classList.add('visually-hidden');\n        });\n});"],"names":["ErrorIcon","keywords","loading","API_KEY","API_URL","perPage","page","searchImg","QUERY","URL","response","axios","totalHits","seeMoreFunction","query","more","errorMessage","iziToast","errorSeeMore","gallery","markUp","images","resalt","image","lightbox","SimpleLightbox","scroll","galleryCardHeight","formSearch","showMoreBtn","event","data"],"mappings":"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"}